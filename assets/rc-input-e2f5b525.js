import{c as h}from"./classnames-443a910e.js";import{r as g,R as o}from"./react-9a8850ac.js";import{f as Y,b as R,g as Z,c as ne,h as te,e as W,d as ae}from"./@babel-a7fb2ddb.js";import{x as le,v as ue}from"./rc-util-f3dd5c12.js";function $(e){return!!(e.addonBefore||e.addonAfter)}function X(e){return!!(e.prefix||e.suffix||e.allowClear)}function p(e,n,s,i){if(s){var a=n;if(n.type==="click"){var r=e.cloneNode(!0);a=Object.create(n,{target:{value:r},currentTarget:{value:r}}),r.value="",s(a);return}if(i!==void 0){a=Object.create(n,{target:{value:e},currentTarget:{value:e}}),e.value=i,s(a);return}s(a)}}function re(e,n){if(e){e.focus(n);var s=n||{},i=s.cursor;if(i){var a=e.value.length;switch(i){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a)}}}}function ee(e){return typeof e>"u"||e===null?"":String(e)}var ce=function(n){var s,i,a=n.inputElement,r=n.prefixCls,A=n.prefix,y=n.suffix,D=n.addonBefore,x=n.addonAfter,E=n.className,k=n.style,P=n.disabled,_=n.readOnly,j=n.focused,N=n.triggerFocus,d=n.allowClear,I=n.value,q=n.handleReset,f=n.hidden,l=n.classes,C=n.classNames,K=n.dataAttrs,v=n.styles,M=g.useRef(null),V=function(w){var S;(S=M.current)!==null&&S!==void 0&&S.contains(w.target)&&(N==null||N())},G=function(){var w;if(!d)return null;var S=!P&&!_&&I,u="".concat(r,"-clear-icon"),t=ne(d)==="object"&&d!==null&&d!==void 0&&d.clearIcon?d.clearIcon:"âœ–";return o.createElement("span",{onClick:q,onMouseDown:function(F){return F.preventDefault()},className:h(u,(w={},R(w,"".concat(u,"-hidden"),!S),R(w,"".concat(u,"-has-suffix"),!!y),w)),role:"button",tabIndex:-1},t)},B=g.cloneElement(a,{value:I,hidden:f,className:h((s=a.props)===null||s===void 0?void 0:s.className,!X(n)&&!$(n)&&E)||null,style:Y(Y({},(i=a.props)===null||i===void 0?void 0:i.style),!X(n)&&!$(n)?k:{})});if(X(n)){var b,m="".concat(r,"-affix-wrapper"),c=h(m,(b={},R(b,"".concat(m,"-disabled"),P),R(b,"".concat(m,"-focused"),j),R(b,"".concat(m,"-readonly"),_),R(b,"".concat(m,"-input-with-clear-btn"),y&&d&&I),b),!$(n)&&E,l==null?void 0:l.affixWrapper),z=(y||d)&&o.createElement("span",{className:h("".concat(r,"-suffix"),C==null?void 0:C.suffix),style:v==null?void 0:v.suffix},G(),y);B=o.createElement("span",Z({className:c,style:$(n)?void 0:k,hidden:!$(n)&&f,onClick:V},K==null?void 0:K.affixWrapper,{ref:M}),A&&o.createElement("span",{className:h("".concat(r,"-prefix"),C==null?void 0:C.prefix),style:v==null?void 0:v.prefix},A),g.cloneElement(a,{value:I,hidden:null}),z)}if($(n)){var H="".concat(r,"-group"),T="".concat(H,"-addon"),J=h("".concat(r,"-wrapper"),H,l==null?void 0:l.wrapper),Q=h("".concat(r,"-group-wrapper"),E,l==null?void 0:l.group);return o.createElement("span",{className:Q,style:k,hidden:f},o.createElement("span",{className:J},D&&o.createElement("span",{className:T},D),g.cloneElement(B,{hidden:null}),x&&o.createElement("span",{className:T},x)))}return B},oe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],ve=g.forwardRef(function(e,n){var s=e.autoComplete,i=e.onChange,a=e.onFocus,r=e.onBlur,A=e.onPressEnter,y=e.onKeyDown,D=e.prefixCls,x=D===void 0?"rc-input":D,E=e.disabled,k=e.htmlSize,P=e.className,_=e.maxLength,j=e.suffix,N=e.showCount,d=e.type,I=d===void 0?"text":d,q=e.classes,f=e.classNames,l=e.styles,C=te(e,oe),K=le(e.defaultValue,{value:e.value}),v=W(K,2),M=v[0],V=v[1],G=g.useState(!1),B=W(G,2),b=B[0],m=B[1],c=g.useRef(null),z=function(t){c.current&&re(c.current,t)};g.useImperativeHandle(n,function(){return{focus:z,blur:function(){var t;(t=c.current)===null||t===void 0||t.blur()},setSelectionRange:function(t,O,F){var L;(L=c.current)===null||L===void 0||L.setSelectionRange(t,O,F)},select:function(){var t;(t=c.current)===null||t===void 0||t.select()},input:c.current}}),g.useEffect(function(){m(function(u){return u&&E?!1:u})},[E]);var H=function(t){e.value===void 0&&V(t.target.value),c.current&&p(c.current,t,i)},T=function(t){A&&t.key==="Enter"&&A(t),y==null||y(t)},J=function(t){m(!0),a==null||a(t)},Q=function(t){m(!1),r==null||r(t)},U=function(t){V(""),z(),c.current&&p(c.current,t,i)},w=function(){var t=ue(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return o.createElement("input",Z({autoComplete:s},t,{onChange:H,onFocus:J,onBlur:Q,onKeyDown:T,className:h(x,R({},"".concat(x,"-disabled"),E),f==null?void 0:f.input),style:l==null?void 0:l.input,ref:c,size:k,type:I}))},S=function(){var t=Number(_)>0;if(j||N){var O=ee(M),F=ae(O).length,L=ne(N)==="object"?N.formatter({value:O,count:F,maxLength:_}):"".concat(F).concat(t?" / ".concat(_):"");return o.createElement(o.Fragment,null,!!N&&o.createElement("span",{className:h("".concat(x,"-show-count-suffix"),R({},"".concat(x,"-show-count-has-suffix"),!!j),f==null?void 0:f.count),style:Y({},l==null?void 0:l.count)},L),j)}return null};return o.createElement(ce,Z({},C,{prefixCls:x,className:P,inputElement:w(),handleReset:U,value:ee(M),focused:b,triggerFocus:z,suffix:S(),disabled:E,classes:q,classNames:f,styles:l}))});export{ce as B,ve as I,ee as f,p as r};
